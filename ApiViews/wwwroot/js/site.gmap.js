var neighborhoods = [
    { lat: -34.4567883, lng: -58.5355714 },
    { lat: -34.503629, lng: -58.494768 },
    { lat: -34.4695512, lng: -58.5177599 }
];
var storeList = [];

var markers = [];
var map;

function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: { lat: -34.6151115, lng: -58.4451014 }
    });
    map.data.addGeoJson(geojson);
    map.data.setStyle({
        fillColor: '#7899ff',
        strokeColor: '#ccffff',
        strokeWeight: 3
    });


}


/*
function drop() {
  clearMarkers();
  for (var i = 0; i < neighborhoods.length; i++) {
    addMarkerWithTimeout(neighborhoods[i], i * 400);
  }
}
*/

var labels = "";
var labelIndex = 0;

function drop(storeList) {
    var search = document.getElementById('searchInput');
    var searchTittle = document.getElementById('searchedTittle');
    searchTittle.innerText = search.innerText;
    clearMarkers();
    for (var i = 0; i < storeList.length; i++) {
        labels = labels + (i + 1);
        addMarkerWithTimeout(storeList[i], i * 400);
    }
}




function addMarkerWithTimeout(store, timeout) {

    var coordinates = { lat: parseFloat(store.latitude), lng: parseFloat(store.longitude) };

    var marker = new google.maps.Marker({
        position: coordinates,
        icon: "http://localhost:5000/home/GmapsSVGMarker",
        map: map,
        animation: google.maps.Animation.DROP,
        label: " " + labels[labelIndex++ % labels.length]
    });

    var contentString = '<div id="content">' +
        '<div id="siteNotice">' +
        '</div>' +
        '<h1 id="store" class="firstHeading">' + store.name + '</h1>' +
        '<h3 id="storeAddress" class="thirddHeading">' + store.address + '</h3>' +
        '<div id="bodyContent">' +
        '<p><b>$' + store.price.cost + '</b></p>' +
        '<p><a href="https://www.google.com/maps/search/?api=1&query=' + store.latitude + "," + store.longitude +
        '" target = "_blank">' + 'Ver en google Maps</a> ' + '</p>' +
        '</div>' +
        '</div>';

    var infowindow = new google.maps.InfoWindow({
        content: contentString,
        map: map,
        position: coordinates
    });


    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map, this);
    });
    infowindow.close(map, this);

    window.setTimeout(function() {
        markers.push(marker);
    }, timeout);
}

function clearMarkers() {
    for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
    }
    markers = [];
}
var todoElMapa = [
    [0, 90],
    [180, 90],
    [180, -90],
    [0, -90],
    [-180, -90],
    [-180, 0],
    [-180, 90],
    [0, 90]
];

var capital = [
    [-58.48548668436706, -34.685059211489204],
    [-58.48678898066282, -34.68479895497019],
    [-58.48809789866209, -34.68448135268607],
    [-58.52635692805052, -34.65541558842834],
    [-58.5283524915576, -34.65292678864612],
    [-58.53055274114013, -34.61562997406199],
    [-58.50970409810543, -34.57011840843747],
    [-58.50026272237301, -34.550715646376624],
    [-58.49867485463619, -34.549407829314745],
    [-58.46678875386715, -34.53526795429056],
    [-58.46468757838011, -34.53433110273237],
    [-58.46134018152952, -34.53060126842042],
    [-58.46114706248045, -34.529770429493844],
    [-58.46005272120237, -34.528320860880655],
    [-58.45960211008787, -34.52782588045326],
    [-58.45953899435699, -34.527627003560184],
    [-58.45954435877502, -34.527428126192184],
    [-58.45934587530792, -34.527061306689816],
    [-58.458922086283565, -34.52674310051161],
    [-58.458176432177424, -34.52648676687275],
    [-58.4573610406369, -34.526424893117586],
    [-58.45659929327667, -34.52661051424518],
    [-58.45537620596588, -34.52729554101633],
    [-58.452940341085196, -34.53005326920801],
    [-58.452778570353985, -34.530654300410866],
    [-58.4529073163867, -34.531237650076825],
    [-58.4523494169116, -34.531432099057305],
    [-58.45142673701048, -34.53113158680516],
    [-58.45063280314207, -34.531343713213374],
    [-58.44934534281492, -34.53477301515824],
    [-58.449044935405254, -34.535179572518445],
    [-58.44795059412718, -34.53530330697314],
    [-58.44586919993162, -34.53498513228952],
    [-58.44290804117918, -34.53512654341013],
    [-58.43921732157469, -34.53685881014493],
    [-58.43812298029661, -34.53804309420877],
    [-58.43649219721556, -34.53813147294097],
    [-58.43436788767576, -34.53882082383201],
    [-58.43365978449583, -34.53993437859727],
    [-58.433080427348614, -34.54161352031391],
    [-58.43271564692259, -34.54240889140968],
    [-58.42996906489134, -34.5442647277426],
    [-58.42900346964598, -34.54622656687055],
    [-58.429046384990215, -34.54776419223688],
    [-58.428295366466045, -34.548223706947375],
    [-58.42692207545042, -34.54741071765603],
    [-58.42327427119017, -34.54855950455424],
    [-58.42430256307125, -34.55181136917047],
    [-58.42078350484371, -34.55265966077843],
    [-58.41554783284664, -34.553578633593844],
    [-58.41108463704586, -34.55594670906835],
    [-58.40850971639156, -34.556123428415866],
    [-58.40692184865475, -34.557501826442824],
    [-58.403488621115685, -34.5606473158949],
    [-58.39919373393059, -34.559304312477536],
    [-58.39387223124504, -34.56050594813525],
    [-58.390524834394455, -34.564110750951244],
    [-58.38872238993645, -34.56630182925587],
    [-58.38520333170891, -34.566937937950875],
    [-58.37842270731926, -34.56736200771096],
    [-58.373787850141525, -34.57054246197772],
    [-58.35713669657707, -34.58220308678515],
    [-58.35645005106926, -34.58517098465089],
    [-58.35662171244621, -34.5891280169268],
    [-58.35567757487297, -34.59160106640691],
    [-58.346579521894455, -34.59414469764633],
    [-58.33988472819328, -34.59965563148465],
    [-58.338082283735275, -34.607497483848356],
    [-58.33524987101555, -34.617881499908634],
    [-58.3284692466259, -34.62381464016989],
    [-58.327868431806564, -34.626357284715944],
    [-58.33027169108391, -34.62847609565287],
    [-58.336365669965744, -34.63031235469677],
    [-58.34288880228996, -34.63165421060343],
    [-58.3489827811718, -34.633490399303305],
    [-58.3533601462841, -34.63631522562997],
    [-58.35671089589596, -34.63903403010951],
    [-58.35795544087887, -34.63974019850993],
    [-58.360530361533165, -34.639669581940474],
    [-58.36095951497555, -34.64019920474574],
    [-58.360315784811974, -34.64079943983617],
    [-58.35808418691158, -34.64157620821004],
    [-58.35748337209225, -34.642564811981025],
    [-58.3570971339941, -34.644330146543204],
    [-58.357526287436485, -34.645177493783414],
    [-58.359285816550255, -34.64584830420737],
    [-58.36048744618893, -34.646589719940735],
    [-58.36173199117184, -34.648037226788226],
    [-58.36263321340084, -34.64831966420204],
    [-58.364263996481895, -34.648249054938795],
    [-58.36632393300533, -34.649625924724866],
    [-58.36907051503658, -34.65107337856137],
    [-58.36962841451168, -34.6516382317393],
    [-58.36984299123287, -34.652450201439436],
    [-58.36962841451168, -34.65354458279874],
    [-58.37035797536373, -34.65428592970388],
    [-58.37164543569088, -34.65478015729031],
    [-58.37258957326412, -34.655662699221956],
    [-58.37366245687008, -34.65679233918193],
    [-58.374520763754845, -34.65703944587078],
    [-58.37632320821285, -34.6571453485119],
    [-58.377481922507286, -34.65728655182288],
    [-58.378769382834435, -34.6576395590478],
    [-58.38258884847164, -34.657816062096416],
    [-58.38443420827389, -34.65792196374515],
    [-58.38559292256832, -34.65834556898684],
    [-58.38662289083004, -34.659263372915916],
    [-58.387695774436, -34.6604988621537],
    [-58.390270695090294, -34.661204847733735],
    [-58.39130066335201, -34.6618049307477],
    [-58.392244800925255, -34.662369710791104],
    [-58.3940901607275, -34.66268739787387],
    [-58.39580677449703, -34.66222851614115],
    [-58.39765213429928, -34.66219321744106],
    [-58.39801859110594, -34.66169903406101],
    [-58.39799713343382, -34.66104600150263],
    [-58.397074453532696, -34.660587110680126],
    [-58.39643072336912, -34.66042826326489],
    [-58.39598011225462, -34.659722271068745],
    [-58.396366350352764, -34.65921042296553],
    [-58.39718174189329, -34.6587691720633],
    [-58.39795421808958, -34.65845146995894],
    [-58.39855503290892, -34.65843381980632],
    [-58.399112932384014, -34.658698571700924],
    [-58.39928459376097, -34.65908687294972],
    [-58.3989841863513, -34.66014586710818],
    [-58.39926313608885, -34.66094010384607],
    [-58.399863950908184, -34.6610636510989],
    [-58.40070080012083, -34.660851855695554],
    [-58.40140890330076, -34.66019881646087],
    [-58.402567617595196, -34.65981052042218],
    [-58.403812162578106, -34.659722271068745],
    [-58.40520691126585, -34.660022318487016],
    [-58.40666603296995, -34.66026941554515],
    [-58.40767454355955, -34.660181166680395],
    [-58.408854715526104, -34.65993406935912],
    [-58.410077802836895, -34.65936927271519],
    [-58.411300890147686, -34.658910372607636],
    [-58.41252397745848, -34.658786822144506],
    [-58.41374706476927, -34.65880447222194],
    [-58.41621469706297, -34.659492822309964],
    [-58.418575040996075, -34.66014586710818],
    [-58.42142891138792, -34.66099305269127],
    [-58.422566168010235, -34.66152253928245],
    [-58.424025289714336, -34.66242265872282],
    [-58.425591699779034, -34.6635345574732],
    [-58.42722248286009, -34.66521120197833],
    [-58.42911075800657, -34.667576095494574],
    [-58.438037149608135, -34.67802317533594],
    [-58.4604175016284, -34.70438207482331],
    [-58.46110414713621, -34.70538756940178],
    [-58.464236967265606, -34.70320016206268],
    [-58.47391437739134, -34.695243862202716],
    [-58.47867798060179, -34.69155653702154],
    [-58.48103832453489, -34.68982749543575],
    [-58.482239954173565, -34.6887512370279],
    [-58.4828407689929, -34.68748088122949],
    [-58.48318409174681, -34.68651045741662],
    [-58.48382782191038, -34.68580468749876],
    [-58.48436426371336, -34.68545180028359],
    [-58.48548668436706, -34.685059211489204]
]

var geojson = {
    "type": "FeatureCollection",
    "features": [{
        "type": "Feature",
        "geometry": {
            "type": "Polygon",
            "coordinates": [
                //Dibuja un poligono que cubre todo el mapa
                todoElMapa,
                //A ese poligono le hace un hueco con la forma de capital
                capital
            ]
        }
    }]
};